(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{18:function(e,t,a){e.exports=a(30)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var o=a(0),s=a.n(o),n=a(16),r=a.n(n),l=a(10);class c extends o.Component{render(){const e=[];if(this.props.book.authors){var t,a=Object(l.a)(this.props.book.authors);try{for(a.s();!(t=a.n()).done;){const a=t.value;e.push(a)}}catch(o){a.e(o)}finally{a.f()}}return s.a.createElement("div",{className:"book"},s.a.createElement("div",{className:"book-top"},s.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url('".concat(this.props.book.imageLinks&&this.props.book.imageLinks.thumbnail,"')")}}),s.a.createElement("div",{className:"book-shelf-changer"},s.a.createElement("select",{onChange:e=>this.props.moveShelf(this.props.book,e.target.value),value:this.props.currentShelf},s.a.createElement("option",{value:"move",disabled:!0},"Move to..."),s.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),s.a.createElement("option",{value:"wantToRead"},"Want to Read"),s.a.createElement("option",{value:"read"},"Read"),s.a.createElement("option",{value:"none"},"None")))),s.a.createElement("div",{className:"book-title"},this.props.book.title),s.a.createElement("div",{className:"book-authors"},e.map(e=>s.a.createElement("div",{key:e},e))))}}var h=c,i=a(9);const m="https://reactnd-books-api.udacity.com";let p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));const d={Accept:"application/json",Authorization:p},u=()=>fetch("".concat(m,"/books"),{headers:d}).then(e=>e.json()).then(e=>e.books);var b=a(6);class k extends o.Component{constructor(...e){super(...e),this.state={query:"",shownBooks:[]},this.updateQuery=e=>{this.setState({query:e}),this.updateShownBooks(e)},this.updateShownBooks=e=>{e?(e=>fetch("".concat(m,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},d),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(e=>e.json()).then(e=>e.books))(e).then(e=>{e.error?this.setState({shownBooks:[]}):this.setState({shownBooks:e})}):this.setState({shownBooks:[]})}}render(){return s.a.createElement("div",{className:"search-books"},s.a.createElement("div",{className:"search-books-bar"},s.a.createElement(b.b,{to:"/",className:"close-search"},"Close"),s.a.createElement("div",{className:"search-books-input-wrapper"},s.a.createElement("input",{value:this.state.query,onChange:e=>this.updateQuery(e.target.value),type:"text",placeholder:"Search by title or author"}))),s.a.createElement("div",{className:"search-books-results"},s.a.createElement("ol",{className:"books-grid"},this.state.shownBooks&&this.state.shownBooks.map(e=>{let t="none";var a,o=Object(l.a)(this.props.books);try{for(o.s();!(a=o.n()).done;){let o=a.value;e.id===o.id&&(t=o.shelf)}}catch(n){o.e(n)}finally{o.f()}return s.a.createElement(h,{key:e.id,book:e,currentShelf:t,moveShelf:this.props.moveShelf})}))))}}var v=k;class E extends o.Component{render(){return s.a.createElement("div",{className:"bookshelf"},s.a.createElement("h2",{className:"bookshelf-title"},this.props.title),s.a.createElement("div",{className:"bookshelf-books"},s.a.createElement("ol",{className:"books-grid"},this.props.books.filter(e=>e.shelf===this.props.value).map(e=>s.a.createElement("li",{key:e.id},s.a.createElement(h,{book:e,moveShelf:this.props.moveShelf,currentShelf:this.props.value}))))))}}var f=E;class S extends o.Component{render(){return s.a.createElement("div",{className:"list-books"},s.a.createElement("div",{className:"list-books-title"},s.a.createElement("h1",null,"MyReads")),s.a.createElement("div",{className:"list-books-content"},s.a.createElement(f,{value:"currentlyReading",title:"Currently Reading",books:this.props.books,moveShelf:this.props.moveShelf}),s.a.createElement(f,{value:"wantToRead",title:"Want to Read",books:this.props.books,moveShelf:this.props.moveShelf}),s.a.createElement(f,{value:"read",title:"Read",books:this.props.books,moveShelf:this.props.moveShelf})),s.a.createElement("div",{className:"open-search"},s.a.createElement(b.b,{to:"/search"},"Add a book")))}}var y=S,N=a(1);a(28);class g extends s.a.Component{constructor(...e){super(...e),this.state={books:[]},this.moveShelf=(e,t)=>{((e,t)=>fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},d),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(e=>e.json()))(e,t).then(u).then(e=>{this.setState({books:e})})}}componentDidMount(){u().then(e=>{this.setState({books:e})})}render(){return s.a.createElement("div",{className:"app"},s.a.createElement(N.a,{path:"/",exact:!0,render:()=>s.a.createElement(y,{books:this.state.books,moveShelf:this.moveShelf})}),s.a.createElement(N.a,{path:"/search",render:()=>s.a.createElement(v,{books:this.state.books,moveShelf:this.moveShelf})}))}}var w=g;a(29);r.a.render(s.a.createElement(b.a,null,s.a.createElement(w,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.0b77e382.chunk.js.map